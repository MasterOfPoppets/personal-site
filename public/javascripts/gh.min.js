!function(){"use strict";function emailSendFailure(data,$scope){var keys=Object.keys(data.errors);$scope.errors={};for(var i=0;i<keys.length;i++)"enquiry_name"===keys[i]?$scope.errors.enquiry_name=data.errors.enquiry_name:"enquiry_email"===keys[i]?$scope.errors.enquiry_email=data.errors.enquiry_email:"enquiry_message"===keys[i]&&($scope.errors.enquiry_message=data.errors.enquiry_message);$scope.submitted=!1,console.log($scope.errors)}function emailSendSuccess(data,$scope,$state,$famousAnimations){$scope.formData={},$scope.exitOpacity=$famousAnimations.animateOut(function(){$state.transitionTo("contact.success")})}angular.module("gh.controllers.contact",[]).controller("ContactCtrl",["$scope","$state","PageFactory",function($scope,$state,PageFactory){PageFactory.newPage("Contact | Gareth Hughes"),$state.is("contact.form")||$state.transitionTo("contact.form")}]).controller("ContactFormCtrl",["$scope","$http","$state","$famousAnimations",function($scope,$http,$state,$famousAnimations){$scope.errors={},$scope.formData={},$scope.submitted=!1,$scope.submit=function(){var httpPostObject={method:"POST",url:"/contact",data:$scope.formData};$scope.submitted=!0,$http(httpPostObject).success(function(data){data.success?emailSendSuccess(data,$scope,$state,$famousAnimations):emailSendFailure(data,$scope)})}}]).controller("ContactSuccessCtrl",["$scope","$state","$famousAnimations",function($scope,$state,$famousAnimations){$scope.$on("$stateChangeSuccess",function(){$state.is("contact.success")&&($scope.entryOpacity=$famousAnimations.animateIn())})}])}(),function(){"use strict";angular.module("gh.controllers",["gh.controllers.contact","gh.controllers.portfolio","gh.fireblogger"]).controller("GHCtrl",["$scope","$http","PageFactory","Fireblogger",function($scope,$http,PageFactory,Fireblogger){$scope.PageFactory=PageFactory,$http.get("/config.json").success(function(data){$scope.socialLinks=data.socialLinks}),Fireblogger.loadAllPosts()}]).controller("BlogCtrl",["$scope","PageFactory","Fireblogger","$stateParams",function($scope,PageFactory,Fireblogger,$stateParams){$scope.model=Fireblogger.FirebloggerPostModel,$stateParams.id&&Fireblogger.getPost($stateParams.id),PageFactory.setTest("/#services"),PageFactory.newPage("Blog | Gareth Hughes")}])}(),function(){"use strict";angular.module("gh.controllers.portfolio",[]).controller("PortfolioCtrl",["$scope","PageFactory","$famous",function($scope,PageFactory,$famous){{var Transitionable=$famous["famous/transitions/Transitionable"];$famous["famous/transitions/Easing"]}$scope.angle=new Transitionable(0),$scope.isShowPortfolioItem=PageFactory.showExpandedItem,$scope.portfolioLinks=[{link:"gbst-syn",image:"http://res.cloudinary.com/gurrkin/image/upload/v1422541316/portfolio/gbst-syn/syn_logo.png"}],$scope.animate=function(){console.log("clicked"),$scope.angle.set(2*Math.PI,{duration:1e3,curve:"easeInOut"})},PageFactory.newPage("Portfolio | Gareth Hughes")}]).controller("PortfolioItemCtrl",["$scope","PageFactory",function($scope,PageFactory){$scope.isShowPortfolioItem=PageFactory.showExpandedItem,PageFactory.newPage("Portfolio | Gareth Hughes"),PageFactory.setShowExpandedItem(!0)}])}(),function(){"use strict";angular.module("gh.directives",[]).directive("ghScrollingAnchor",function(){return{restrict:"A",link:function(scope,element,attrs){element.on("click",function(event){$("html, body").stop().animate({scrollTop:$(attrs.href).offset().top},1500,"easeInOutExpo"),event.preventDefault()})}}}).directive("ghShrinkingHeader",function($timeout,$window){return{restrict:"A",link:function(scope,element){function scrollY(){return $window.pageYOffset||document.documentElement.scrollTop}function scrollPage(){console.log("scrolling"),scrollY()>scope.changeHeaderOn?element.addClass("navbar-shrink"):element.removeClass("navbar-shrink"),scope.didScroll=!1}scope.changeHeaderOn=175,scope.didScroll=!1,angular.element($window).bind("scroll",function(){scope.didScroll||(scope.didScroll=!0,$timeout(function(){scrollPage()},250))})}}}).directive("ghSocialLink",function(){return{restrict:"E",templateUrl:"/templates/gh-social-link.html"}})}(),function(){"use strict";angular.module("gh.factories.famous",[]).factory("$famousAnimations",["$famous",function($famous){return{animateIn:function(callback){var opacity=new $famous["famous/transitions/Transitionable"](0);return opacity.set(1,{duration:500,curve:"easeInOut"},function(){callback&&callback()}),opacity},animateOut:function(callback){var opacity=new $famous["famous/transitions/Transitionable"](1);return opacity.set(0,{duration:500,curve:"easeInOut"},function(){callback&&callback()}),opacity}}}])}(),function(){"use strict";angular.module("gh.factories",["gh.factories.famous"]).factory("PageFactory",function(){var page={showExpandedItem:!1,testLink:"#services",title:"Gareth Hughes"};return{newPage:function(title){page.showExpandedItem=!1,page.title=title},showExpandedItem:function(){return page.showExpandedItem},setShowExpandedItem:function(showExpandedItem){page.showExpandedItem=showExpandedItem},setTest:function(value){page.testLink=value},test:function(){return page.testLink},title:function(){return page.title}}})}(),function(){"use strict";angular.module("GHApp",["gh.controllers","gh.factories","gh.directives","famous.angular","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!0),$locationProvider.hashPrefix("!"),$stateProvider.state("index",{templateUrl:"partials/index"}).state("index.home",{url:"/",views:{navigation:{templateUrl:"partials/navigation"},content:{templateUrl:"partials/content"},contact:{templateUrl:"partials/contact",controller:"ContactFormCtrl"}}}).state("portfolio",{url:"/portfolio",templateUrl:"partials/portfolio",controller:"PortfolioCtrl"}).state("portfolioItem",{url:"/portfolio/:id",views:{"":{templateUrl:function($stateParams){return"partials/portfolio/"+$stateParams.id},controller:"PortfolioItemCtrl"}}}).state("blog",{url:"/blog",templateUrl:"partials/blog",controller:"BlogCtrl"}).state("blogItem",{url:"/blog/:id",templateUrl:function($stateParams){return"partials/blog/"+$stateParams.id},controller:"BlogCtrl"}).state("contact",{url:"/contact",templateUrl:"partials/contact",controller:"ContactCtrl"}).state("contact.form",{templateUrl:"partials/contact/contact_form",controller:"ContactFormCtrl"}).state("contact.success",{templateUrl:"partials/contact/contact_success",controller:"ContactSuccessCtrl"})}])}(),function(){"use strict";angular.module("gh.fireblogger",[]).value("fb",new Firebase("https://fiery-heat-3490.firebaseio.com/")).factory("Fireblogger",["fb","$timeout",function(fb,$timeout){var fbBlogEntries=fb.child("blogEntries"),FirebloggerPostModel={posts:[],post:null};return{FirebloggerPostModel:FirebloggerPostModel,getPost:function(postUrl){fbBlogEntries.child(postUrl).once("value",function(snapshot){$timeout(function(){FirebloggerPostModel.post=snapshot.val()})})},loadAllPosts:function(){fbBlogEntries.on("child_added",function(snapshot){$timeout(function(){FirebloggerPostModel.posts.unshift(snapshot.val())})})}}}]).directive("markdown",function(){return{restrict:"E",require:"ngModel",link:function(scope,element,attrs,ngModel){ngModel.$render=function(){var html=marked(ngModel.$viewValue||"");element.html(html)}}}})}();